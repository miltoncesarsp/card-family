<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Admin - Gerenciador Unificado</title>
    <link rel="stylesheet" href="style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    
    <div class="main-forms-container">
        
        <div class="form-section" id="baseFormContainer">
            <h2>‚ú® Criar/Editar Personagem Base</h2>
            <form class="card-form base-form" id="baseForm">
                <label>Nome do Personagem (Ex: Hulk):</label>
                <input id="basePersonagem" type="text" required>
                
                <label>Origem (Ex: Marvel):</label>
                <input id="baseOrigem" type="text" required>
                
                <label>Elemento Padr√£o:</label>
                <select id="baseElemento" required>
                    <option value="Terra">Terra</option>
                    <option value="Fogo">Fogo</option>
                    <option value="√Ågua">√Ågua</option>
                    <option value="Ar">Ar</option>
                    <option value="Tecnologia">Tecnologia</option>
                    <option value="Luz">Luz</option>
                    <option value="Sombra">Sombra</option>
                </select>
                
                <button type="button" id="saveBaseBtn">Salvar Personagem Base</button>
            </form>
        </div>

        <div class="form-section">
            <h2>üÉè Criar/Editar Carta</h2>
            <form class="card-form" id="cardForm">
                <label>Nome do Personagem:</label>
                <input id="cardName" type="text" list="personagem-nomes">
                <datalist id="personagem-nomes"></datalist>

                <label>For√ßa:</label>
                <input id="cardPower" type="number" min="0">
                
                <label>Raridade:</label>
                <select id="cardRarity">
                    <option value="Comum">Comum (cinza)</option>
                    <option value="Rara">Rara (azul)</option>
                    <option value="√âpica">√âpica (roxa)</option>
                    <option value="Lend√°ria">Lend√°ria (laranja)</option>
                    <option value="M√≠tica">M√≠tica (amarela)</option>
                </select>
                
                <label>Imagem da carta:</label>
                <input id="fileInput" type="file" accept="image/*">
                <input id="currentImageUrl" type="hidden">

                <div class="button-group">
                    <button type="button" id="saveCardBtn">Salvar Carta</button>
                    <button type="button" id="cancelEditBtn" style="display:none;">Cancelar Edi√ß√£o</button>
                </div>
            </form>
            <div id="cardPreviewContainer"></div>
        </div>
    </div>
    
    <hr>
    
    <section class="management-section">
        <h2>üìä Linha de Evolu√ß√£o e Gest√£o de Cartas</h2>
        <div id="unifiedListContainer"></div>
    </section>

    <hr>
    
<section class="management-section" id="rarityRulesFormSection">
    <h2>üìú Gerenciar Regras de Raridade</h2>
    <div id="rarityRulesContainer"></div>
    
    <div class="form-wrapper">
        <h3>Editar Regra de Raridade (Chave Prim√°ria)</h3>
        <form class="card-form" id="rarityForm">
            <label>Raridade (Nome):</label>
            <input id="rarityNameInput" type="text" disabled> <label>Repetidas para Evoluir:</label>
            <input id="evolutionCostInput" type="number" min="0" required>
            
            <label>Ordem de Evolu√ß√£o (1=Comum, 5=M√≠tica):</label>
            <input id="orderInput" type="number" min="1" max="10" required>
            
            <button type="button" id="saveRarityBtn">Salvar Regra (Apenas Edi√ß√£o)</button>
        </form>
    </div>
</section>
    <hr>
    
<section class="management-section">
    <h2>üì¶ Gerenciar Pacotes (Pre√ßo e Chances)</h2>
    <button type="button" id="newPackBtn" style="width: 200px; margin-bottom: 15px;">+ Novo Pacote</button>
    <div id="packsContainer"></div>
    
    <div class="form-wrapper" id="packFormContainer">
        <h3>Criar/Editar Pacote</h3>
        <form class="card-form" id="packForm">
            <input type="hidden" id="packIdInput"> 
            
            <label>Nome do Pacote:</label>
            <input id="packNameInput" type="text" required>
            
            <label>Pre√ßo em Moedas:</label>
            <input id="packPriceInput" type="number" min="0" required>
            
            <label>Total de Cartas no Pacote:</label>
            <input id="packTotalCardsInput" type="number" min="1" required>

            <h4 class="form-sub-title">Chances de Drop (%) - Soma deve ser 100%</h4>
            <label>Comum (%):</label><input id="chanceComumInput" type="number" min="0" max="100" step="0.1" required>
            <label>Rara (%):</label><input id="chanceRaraInput" type="number" min="0" max="100" step="0.1" required>
            <label>√âpica (%):</label><input id="chanceEpicaInput" type="number" min="0" max="100" step="0.1" required>
            <label>Lend√°ria (%):</label><input id="chanceLendariaInput" type="number" min="0" max="100" step="0.1" required>
            <label>M√≠tica (%):</label><input id="chanceMiticaInput" type="number" min="0" max="100" step="0.1" required>
            
            <label>Imagem da Capa do Pacote:</label>
            <input id="packFileInput" type="file" accept="image/*">
            <input type="hidden" id="packCurrentImageUrl"> <button type="button" id="savePackBtn">Salvar Novo Pacote</button>
        </form>
    </div>
</section>

    <hr>
    
<section class="management-section">
    <h2>üë§ Gerenciar Jogadores</h2>
    <p class="base-details">Edi√ß√£o de Moedas e N√≠vel. Use com cautela.</p>
    <div id="playersContainer"></div>
    
    <div class="form-wrapper" id="playerEditFormSection" style="display:none; margin-top: 20px; border-left: 5px solid #ff9800;">
        <h3>Editar Saldo/N√≠vel do Jogador</h3>
        <form class="card-form">
            <input type="hidden" id="playerEditId"> 
            <label>Nome:</label>
            <input id="playerEditName" type="text" disabled>
            <label>Email:</label>
            <input id="playerEditEmail" type="text" disabled>
            
            <label>Moedas:</label>
            <input id="playerEditMoedas" type="number" min="0" required>
            
            <label>N√≠vel:</label>
            <input id="playerEditNivel" type="number" min="1" required>
            
            <button type="button" id="savePlayerEditBtn">Atualizar Jogador</button>
        </form>
    </div>
</section>
    
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
    <script src="supabaseClient-v2.js?v=2"></script>
    <script src="admin.js?v=3"></script> </body>
</html>
